# aws-lambda-runtime-nadesiko

日本語プログラミング言語「なでしこ」を AWS Lambda の関数として記述するための Custom Runtime です。

## Lambda 関数の書き方

ファイル `function.nako` を作成し、関数 `ハンドラ` を定義します。

```
●（イベントデータとコンテキストの）ハンドラとは
　関数の中身
ここまで
```

関数の引数には以下の内容が渡されます。

  * `イベントデータ`: Lambda 関数に渡されるデータです。
  * `コンテキスト`: Lambda 関数の実行環境情報がオブジェクトで渡されます。
      * `リクエストID`: Lambda 関数の呼び出しを特定する ID です。
      * `タイムアウト`: Lambda 関数の実行がタイムアウトする時刻の UNIX TIME です。
      * `関数ARN`: Lambda 関数を特定する ARN です。
      * `ロググループ名`: Lambda 関数ログを含むログストリームが作成される Amazon CloudWatch Logs グループの名前
      * `ログストリーム名`: Lambda 関数ログを含む Amazon CloudWatch Logs ストリーム
      * `関数名`: Lambda 関数の名前
      * `関数バージョン`: Lambda 関数のバージョン
      * `関数メモリサイズ`: Lambda 関数のサイズ (MB 単位)

## 戻り値について

関数の戻り値が Lambda 関数の戻り値になります。文字列かオブジェクト型を戻すことができます。

## ログ出力について

関数内で「表示」関数を使用すると Lambda のログに出力されます。

## 自動で追加される命令

### `lambda関数実行残時間`

引数に Lambda 関数のコンテキストを渡すことで、labmda 関数の実行残り時間を取得することができます。

```
コンテキストのlambda関数実行残時間
「残り時間は{それ}ms」と表示
```

## Lambda 関数の定義方法

 1. 作成したファイルを zip 形式で圧縮します。
 2. AWS Lambda の関数を以下の設定で作成します。
      * **参照されるレイヤー**
        1. 「レイヤーの追加」ボタンを押す
        2. ラジオボタン「レイヤーバージョン ARN を提供」を選択
        3. 「レイヤーバージョン ARN」に `arn:aws:lambda:ap-northeast-1:669411927913:layer:nadesiko:22` を設定
      * **コード エントリ タイプ**: 「.zip ファイルをアップロード」を選択
      * **ランタイム**: 「独自のランタイム」を選択
      * **ハンドラ**: `function.ハンドラ` と入力
      * **関数パッケージ**: 作成した zip ファイルを選択

## ライセンス

MIT
